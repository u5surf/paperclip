<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `spec` mod in crate `rustc_target`."><meta name="keywords" content="rust, rustlang, rust-lang, spec"><title>rustc_target::spec - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../rustc_target/index.html'><img src='../../rust-logo.png' alt='logo' width='100'></a><p class='location'>Module spec</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class='location'><a href='../index.html'>rustc_target</a></p><script>window.sidebarCurrent = {name: 'spec', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/rustc_target/spec/mod.rs.html#1-1428' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../index.html'>rustc_target</a>::<wbr><a class="mod" href=''>spec</a></span></h1><div class='docblock'><p><a href="https://github.com/rust-lang/rfcs/pull/131">Flexible target specification.</a></p>
<p>Rust targets a wide variety of usecases, and in the interest of flexibility,
allows new target triples to be defined in configuration files. Most users
will not need to care about these, but this is invaluable when porting Rust
to a new platform, and allows for an unprecedented level of control over how
the compiler works.</p>
<h1 id="using-custom-targets" class="section-header"><a href="#using-custom-targets">Using custom targets</a></h1>
<p>A target triple, as passed via <code>rustc --target=TRIPLE</code>, will first be
compared against the list of built-in targets. This is to ease distributing
rustc (no need for configuration files) and also to hold these built-in
targets as immutable and sacred. If <code>TRIPLE</code> is not one of the built-in
targets, rustc will check if a file named <code>TRIPLE</code> exists. If it does, it
will be loaded as the target configuration. If the file does not exist,
rustc will search each directory in the environment variable
<code>RUST_TARGET_PATH</code> for a file named <code>TRIPLE.json</code>. The first one found will
be loaded. If no file is found in any of those directories, a fatal error
will be given.</p>
<p>Projects defining their own targets should use
<code>--target=path/to/my-awesome-platform.json</code> instead of adding to
<code>RUST_TARGET_PATH</code>.</p>
<h1 id="defining-a-new-target" class="section-header"><a href="#defining-a-new-target">Defining a new target</a></h1>
<p>Targets are defined using <a href="http://json.org/">JSON</a>. The <code>Target</code> struct in
this module defines the format the JSON file should take, though each
underscore in the field names should be replaced with a hyphen (<code>-</code>) in the
JSON file. Some fields are required in every target specification, such as
<code>llvm-target</code>, <code>target-endian</code>, <code>target-pointer-width</code>, <code>data-layout</code>,
<code>arch</code>, and <code>os</code>. In general, options passed to rustc with <code>-C</code> override
the target's settings, though <code>target-feature</code> and <code>link-args</code> will <em>add</em>
to the list specified by the target, rather than replace.</p>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="abi/index.html" title='rustc_target::spec::abi mod'>abi</a></td><td class='docblock-short'></td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Target.html" title='rustc_target::spec::Target struct'>Target</a></td><td class='docblock-short'><p>Everything <code>rustc</code> knows about how to compile for a specific target.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.TargetOptions.html" title='rustc_target::spec::TargetOptions struct'>TargetOptions</a></td><td class='docblock-short'><p>Optional aspects of a target specification.</p>
</td></tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table><tr class='module-item'><td><a class="enum" href="enum.LinkerFlavor.html" title='rustc_target::spec::LinkerFlavor enum'>LinkerFlavor</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="enum" href="enum.LldFlavor.html" title='rustc_target::spec::LldFlavor enum'>LldFlavor</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="enum" href="enum.LoadTargetError.html" title='rustc_target::spec::LoadTargetError enum'>LoadTargetError</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="enum" href="enum.MergeFunctions.html" title='rustc_target::spec::MergeFunctions enum'>MergeFunctions</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="enum" href="enum.PanicStrategy.html" title='rustc_target::spec::PanicStrategy enum'>PanicStrategy</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="enum" href="enum.RelroLevel.html" title='rustc_target::spec::RelroLevel enum'>RelroLevel</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="enum" href="enum.TargetTriple.html" title='rustc_target::spec::TargetTriple enum'>TargetTriple</a></td><td class='docblock-short'><p>Either a target triple string or a path to a JSON file.</p>
</td></tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table><tr class='module-item'><td><a class="trait" href="trait.HasTargetSpec.html" title='rustc_target::spec::HasTargetSpec trait'>HasTargetSpec</a></td><td class='docblock-short'></td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.get_targets.html" title='rustc_target::spec::get_targets fn'>get_targets</a></td><td class='docblock-short'></td></tr></table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table><tr class='module-item'><td><a class="type" href="type.LinkArgs.html" title='rustc_target::spec::LinkArgs type'>LinkArgs</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="type" href="type.TargetResult.html" title='rustc_target::spec::TargetResult type'>TargetResult</a></td><td class='docblock-short'></td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g., <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g., <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g., <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><script>window.rootPath = "../../";window.currentCrate = "rustc_target";</script><script src="../../aliases.js"></script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>